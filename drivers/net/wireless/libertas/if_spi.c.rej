--- drivers/net/wireless/libertas/if_spi.c
+++ drivers/net/wireless/libertas/if_spi.c
@@ -997,6 +997,7 @@
 		spin_unlock_irqrestore(&card->buffer_lock, flags);
 		break;
 	default:
+		kfree(packet);
 		netdev_err(priv->dev, "can't transfer buffer of type %d\n",
 			   type);
 		err = -EINVAL;
